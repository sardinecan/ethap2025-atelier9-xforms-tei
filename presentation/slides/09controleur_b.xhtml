<?xml-stylesheet href="../../xsltforms/xsltforms.xsl" type="text/xsl"?>
<?css-conversion no?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xf="http://www.w3.org/2002/xforms" xf:bogus="fix/Firefox/namespace/issue" xmlns:ev="http://www.w3.org/2001/xml-events" lang="fr">
    <head>
        <meta charset="UTF-8"/>
        <title>Ethap 2025 - atelier 3 - XForms</title>
        <link rel="stylesheet" href="../assets/css/main.css" type="text/css"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/atom-one-dark-reasonable.min.css" integrity="sha512-RwXJS3k4Z0IK6TGoL3pgQlA9g2THFhKL7z9TYWdAI8u6xK0AUuMWieJuWgTRayywC9A94ifUj1RzjDa1NIlUIg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
        <xf:model>
            <xf:instance>
                <list xmlns="">
                    <item/>
                </list>
            </xf:instance>
        </xf:model>
    </head>
    <body class="slide">
        <main class="slide">
            <h1>Actions - exemple</h1>
            <pre>
                <code class="language-xml small">
&lt;xf:repeat nodeset="/list/item"&gt;
   &lt;xf:input ref="." incremental="true"&gt;
      &lt;xf:label&gt;
         &lt;xf:output value="concat('item ', position())"/&gt;
         &lt;xf:trigger ref="self::item[parent::list[count(item) &gt; 1]]"&gt;
            &lt;xf:label&gt;-&lt;/xf:label&gt;
            &lt;xf:delete nodeset="." ev:event="DOMActivate" if="count(/list/item) &gt; 1"/&gt;
         &lt;/xf:trigger&gt;
      &lt;/xf:label&gt;
   &lt;/xf:input&gt;
   &lt;br/&gt;
&lt;/xf:repeat&gt;
&lt;xf:trigger&gt;
   &lt;xf:label&gt;+&lt;/xf:label&gt;
   &lt;xf:action ev:event="DOMActivate"&gt;
      &lt;xf:insert nodeset="/list/item" position="after" at="last()"/&gt;
      &lt;xf:setvalue ref="/list/item[last()]"/&gt;
   &lt;/xf:action&gt;
&lt;/xf:trigger&gt;
                </code>
            </pre>
            <xf:repeat nodeset="/list/item">
                <xf:input ref="." incremental="true">
                    <xf:label>
                        <xf:output value="concat('item ', position())"/>
                        <xf:trigger ref="self::item[parent::list[count(item) &gt; 1]]">
                            <xf:label>-</xf:label>
                            <xf:delete nodeset="." ev:event="DOMActivate" if="count(/list/item) &gt; 1"/>
                        </xf:trigger>
                    </xf:label>
                </xf:input>
                <br/>
            </xf:repeat>
            <xf:trigger>
                <xf:label>+</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert nodeset="/list/item" position="after" at="last()"/>
                    <xf:setvalue ref="/list/item[last()]"/>
                </xf:action>
            </xf:trigger>
        </main>
        <script>hljs.highlightAll();</script>
    </body>
</html>